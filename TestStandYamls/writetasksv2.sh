sed 's/:/-/g' ~/sop09.csv | awk -F "," '{if ($8!="" && $3>0 && $3<100 && $3!="") {if ($3!=lasttask) {lasttask=$3;print "%YAML  1.1\n---\n# LSST Hardware Receipt - Inspection\nName: SR-RCV-"$3"\nVersion: next\nHardwareType: CCD\nDescription: Hardware Receipt\nSequence:\n   -"};if (index(lastx,"X")>=1) {print "     Name: "pre" "nm;if (aa!="") print "     Description: NA\n     Version:  next\n     Prerequisites:\n       -\n         Name: SR-"lasttask"."laststep"-INSTRUCTIONS\n         Description: <ul>"aa"</ul>";print "         PrerequisiteType: TEST_EQUIPMENT";if (naa>1) {print "       -\n         Name: "lastsub"\n         PrerequisiteType: TEST_EQUIPMENT"};print "   -";aa="";naa=0;nm="";pre=""};if (pre=="") {pre=$2};if (nm=="") {nm=$8} else {if ($4!="") {aa = aa"<li>"$4"."$5" - "$8"</li>";naa=naa+1}};laststep=$4;lastx=$6;lastsub=$8}}' | sed 's/"//g' | more
